---
name: skill-builder
description: Claude Code用の新しいskillを作成するためのガイド。skillの目的、構造、ベストプラクティスを統合。新しいskillを作りたいとき、既存skillを改善したいとき、skillの作り方を学びたいときに使用。
allowed-tools:
  - AskUserQuestion
  - Read
  - Glob
  - Grep
  - Write
  - Bash
---

# Skill Builder - Claude Code Skill作成ガイド

Claude Code用の高品質なskillを作成するための対話型ガイドです。

## Skillとは

Skillは、Claude Codeの機能を拡張する再利用可能な指示セットです。特定のタスク、知識、ワークフローをパッケージ化し、必要なときに呼び出せます。

### Skillの動作

1. **自動呼び出し**: `description`に基づいてClaudeが状況判断で呼び出し
2. **手動呼び出し**: `/skill-name`コマンドで明示的に実行
3. **バックグラウンド知識**: 常にコンテキストに含まれる参照情報

## 核心原則

### 1. 簡潔性が鍵
Claudeが既に知っていることは書かない。プログラミング言語の基本文法、一般的なフレームワークの使い方、標準的なベストプラクティスは不要。

**書くべき**: プロジェクト固有のパターン、特殊な規約、チーム独自のワークフロー

### 2. 適切な自由度の設定
タスクの性質に応じて指示の具体性を調整:

- **高自由度（テキスト指示）**: 複数のアプローチが有効な創造的タスク
- **中自由度（擬似コード/パラメータ付きスクリプト）**: 推奨パターンがあるが柔軟性も必要
- **低自由度（具体的なスクリプト）**: エラーが許されない重要な操作

### 3. 段階的開示
SKILL.mdは500行未満に保ち、詳細は別ファイルへ。必要なときだけ追加情報をロード。

## Skillの分類

### 参照コンテンツ型
知識をインラインで適用。API規約、コーディングスタイル、アーキテクチャパターンなど。

**特徴**:
- `user-invocable: false`（バックグラウンド知識）
- 簡潔で具体的な例
- 頻繁に参照される情報

### タスク実行型
具体的なアクションの手順。デプロイ、コミット、テスト実行など。

**特徴**:
- 明確なステップバイステップの指示
- 必要なツールの指定
- エラーハンドリングの含有

### 視覚的出力型
スクリプトを使った複雑な処理。グラフ生成、レポート作成、コードベース可視化など。

**特徴**:
- 外部スクリプトの活用
- 動的コンテキスト挿入
- リッチな出力フォーマット

## Skill作成プロセス

以下の対話を通じて、あなたに最適なskillを作成します。

### ステップ1: 基本情報の収集

AskUserQuestionで以下を確認:

1. **Skill名**: ケバブケース（例: `api-conventions`, `deploy-prod`）
2. **目的と用途**: 何をするskillで、いつ使うか
3. **分類**: 参照型/タスク型/視覚出力型/ハイブリッド型
4. **呼び出し方法**: 自動/手動/バックグラウンド
5. **必要な機能**: ファイル操作、対話、コマンド実行など

### ステップ2: 設計

収集した情報から以下を決定:

**YAMLフロントマター**:
- `name`: skill名
- `description`: 「何を」+「いつ」を含む明確な説明
- `disable-model-invocation`: 手動のみの場合はtrue
- `user-invocable`: バックグラウンド知識の場合はfalse
- `allowed-tools`: 必要最小限のツールのみ
- `context`: サブエージェント実行の場合はfork
- `agent`: サブエージェントタイプ（必要な場合）

**本文構造**:
- 参照型: 簡潔な原則と具体例
- タスク型: 明確な手順とエラーハンドリング
- 視覚出力型: スクリプト活用と動的コンテキスト
- ハイブリッド型: セクション分割と段階的開示

### ステップ3: テンプレート選択

分類に応じた適切なテンプレートを提案:

- **基本テンプレート** (`templates/basic-template.md`): シンプルなskill向け
- **高度なテンプレート** (`templates/advanced-template.md`): 複雑な機能を含むskill向け

必要に応じてサンプルを参照:
- `examples/reference-skill.md`: 参照コンテンツ型の例
- `examples/task-skill.md`: タスク実行型の例
- `examples/visual-output-skill.md`: 視覚的出力型の例

### ステップ4: プレビューと確認

生成されたSKILL.mdの内容をユーザーに提示し、以下を確認:

**ベストプラクティスチェックリスト**:
- [ ] descriptionに「何を」「いつ」が含まれている
- [ ] SKILL.mdが500行未満（詳細は別ファイル）
- [ ] allowed-toolsが必要最小限
- [ ] 指示が簡潔で明確
- [ ] 適切な自由度の設定
- [ ] 例や具体的なパターンを含む

### ステップ5: ファイル作成

確認後、以下を実行:

1. **ディレクトリ作成**:
```bash
mkdir -p ~/.local/share/chezmoi/dot_claude/skills/<skill-name>
```

2. **SKILL.md作成**: 生成された内容を書き込み

3. **サポートファイル作成**（必要に応じて）:
   - `best-practices.md`: 詳細なガイドライン
   - `examples/*.md`: サンプル
   - `templates/*.md`: テンプレート
   - `scripts/*.sh`: 実行スクリプト

4. **適用**:
```bash
chezmoi apply
```

### ステップ6: 検証と反復

作成後の確認:

1. **構文チェック**: YAMLフロントマターの妥当性
2. **テスト実行**: `/skill-name` で動作確認
3. **自動呼び出しテスト**: descriptionに基づいて適切に呼び出されるか
4. **フィードバック**: 実際の使用から改善点を発見

## 重要な変数と動的コンテキスト

### 変数置換

- `$ARGUMENTS`: すべての引数
- `$ARGUMENTS[N]` または `$N`: N番目の引数
- `${CLAUDE_SESSION_ID}`: セッションID

### 動的コンテキスト挿入

コマンド実行結果をSKILL.md内に埋め込むことができます。構文は感嘆符とバッククォートでコマンドを囲みます。

詳細は `best-practices.md` および `examples/` 内のサンプルを参照してください。

## ベストプラクティス詳細

より詳細なベストプラクティスは `best-practices.md` を参照してください:

**主要トピック**:
- Description設計のコツ
- 自由度の適切な設定
- コンテキスト効率性
- 段階的開示パターン
- サポートファイルの活用法
- 避けるべき落とし穴

## 実行

skillの作成を始めましょう。以下の情報を教えてください:

1. **Skill名**（ケバブケース）
2. **目的**（このskillは何をするか）
3. **使用シーン**（どんなときに使うか）
4. **特別な要件**（特定のツール、スクリプト、複雑な処理など）

情報をいただければ、最適なskillを設計し、ファイルを生成します。
